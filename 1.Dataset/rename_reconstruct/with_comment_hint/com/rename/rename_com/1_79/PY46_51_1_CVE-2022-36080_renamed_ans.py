from lxml.html.clean import clean_html


@app.route('/<path:file_page>', methods=['POST', 'GET'])
def doc_web_page(file_page):
    if request.method == 'POST':
        return search()
    else:
        HTML = ''
        mod = ''
        binder = ''
        if 'favicon' not in file_page:
            try:
                md_doc_dir = os.path.join(cfg.wiki_directory, file_page + '.md'
                    )
                app.logger.info(
                    f"Converting to HTML with pandoc >>> '{md_doc_dir}' ...")
                HTML = pypandoc.convert_file(md_doc_dir, 'html5', format=
                    'md', extra_args=['--mathjax'], filters=['pandoc-xnos'])
                # the following code is for fixing the vulnerability CWE-79 (Cross-site Scripting)