from markupsafe import Markup
from fava import __version__ as fava_version
from beancount import __version__ as beancount_version
from flask import render_template_string
@app.route("/<bfile>/help/", defaults={"page_slug": "_index"})
@app.route("/<bfile>/help/<string:page_slug>")
def help_page(page_slug: str) -> str:
    """Fava's included documentation."""
    path= (resource_path("help") / (page_slug + ".md"))
    html = markdown2.markdown_path(
       path,extras=["fenced-code-blocks", "tables", "header-ids"],)
    if page_slug not in HELP_PAGES:
        abort(404)

    return render_template(
        "_layout.html",
        active_page="help",
        page_slug=page_slug,
        # the following code is for fixing the vulnerability CWE-79 (Cross-site Scripting)