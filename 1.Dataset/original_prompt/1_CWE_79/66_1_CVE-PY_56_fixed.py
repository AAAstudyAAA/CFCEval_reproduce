import tornado.ioloop
import tornado.web
import os
#import sqlite3
import json
import sys
import rtxcomplete
import traceback
import re

def get(self, arg,word=None):
    try:
        limit = self.get_argument("limit")
        word = self.get_argument("word")
        # ---fixed---
        callback = sanitize_callback(self.get_argument("callback"))
        # ---fixed---
        result = rtxcomplete.prefix(word,limit)

        result = callback+"("+json.dumps(result)+");"

        self.write(result)

    except:
        print(sys.exc_info()[:])
        traceback.print_tb(sys.exc_info()[-1])
