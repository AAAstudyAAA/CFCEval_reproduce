from twisted.web import resource

def getChild(self, name, request):
    if name == b"":
        return self

    td = b".twistd"

    if name.endswith(td):
        username = name[: -len(td)]
        sub = 1
    else:
        username = name
        sub = 0
    try:
        # Decode using the filesystem encoding to reverse a transformation
        # done in the pwd module.
        (
            pw_name,
            pw_passwd,
            pw_uid,
            pw_gid,
            pw_gecos,
            pw_dir,
            pw_shell,
        ) = self._pwd.getpwnam(username.decode(sys.getfilesystemencoding()))
    except KeyError:
        return resource.NoResource("No such user")