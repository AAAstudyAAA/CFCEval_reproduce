import base64
import logging
import pathlib
import uuid

from django.conf import settings
from django.core import signing
from django.utils.functional import cached_property
from storages.utils import safe_join

from s3file.storages import storage

logger = logging.getLogger("s3file")


class S3FileInputMixin:
    """FileInput that uses JavaScript to directly upload to Amazon S3."""

    needs_multipart_form = False



    # fixed
    upload_path = safe_join(
        str(storage.aws_location),
        str(
            getattr(
                settings, "S3FILE_UPLOAD_PATH", pathlib.PurePosixPath("tmp", "s3file")
            )
        ),
    )
    # fixed






    expires = settings.SESSION_COOKIE_AGE

    @property
    def bucket_name(self):
        return storage.bucket.name