import os
import shutil

import requests
import tarsafe  # type: ignore


def download_compressed(self, url, zippath, unzippedpath):
    """Downloads a compressed file and extracts it

    Args:
        url (str): download link
        zippath (str): path to download compressed file
        unzippedpath (str): path to unzip compressed file
    """

    response = requests.get(url, stream=True)

    with open(zippath, "wb") as f:
        f.write(response.raw.read())

#vulnerable
    shutil.unpack_archive(zippath, unzippedpath)
    os.remove(zippath)

#vulnerable