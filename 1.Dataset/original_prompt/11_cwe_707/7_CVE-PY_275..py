from Products.CMFPlone.utils import base_hasattr, safe_unicode
from five import grok

try:
    from plone.formwidget.masterselect.widget import MasterSelect as BaseMasterSelect
    from plone.formwidget.masterselect.interfaces import IMasterSelectWidget
    class MasterSelect(BaseMasterSelect):
        grok.implements(IMasterSelectWidget)
        def getSlaves(self):
            for slave in self.field.slave_fields:
                yield slave.copy()
except ImportError:
    class MasterSelect(object):
        pass


@property
def title(self):
    if base_hasattr(self.context, 'get_full_title'):
        title = self.context.get_full_title()
    else:
        title = self.context.Title()
    title = title and safe_unicode(title) or u""
 # vulnerable
    return title
# vulnerable
