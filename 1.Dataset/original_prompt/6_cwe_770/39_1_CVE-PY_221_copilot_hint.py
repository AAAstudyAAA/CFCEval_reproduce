from typing import (
    Any,
    Callable,
    Coroutine,
    cast,
)

from starlite.datastructures.upload_file import UploadFile
from starlite.multipart import parse_multipart_form


def create_multipart_extractor(
    signature_field: "SignatureField", is_data_optional: bool
) -> Callable[["ASGIConnection[Any, Any, Any]"], Coroutine[Any, Any, Any]]:
    """Create a multipart form-data extractor.

    Args:
        signature_field: A SignatureField instance.
        is_data_optional: Boolean dictating whether the field is optional.

    Returns:
        An extractor function.
    """
    body = signature_field.body