import logging

import cherrypy

from rdiffweb.controller import Controller


try:
    import simplejson as json
except ImportError:
    import json

logger = logging.getLogger(__name__)


@cherrypy.tools.json_out(handler=json_handler)
@cherrypy.config(**{'error_page.default': False})
@cherrypy.tools.auth_basic(realm='rdiffweb', checkpassword=_checkpassword, priority=70)
@cherrypy.tools.auth_form(on=False)
@cherrypy.tools.auth_mfa(on=False)
@cherrypy.tools.i18n(on=False)
# coge
@cherrypy.tools.rdw_tool_json(on=False, priority=70)  # Ensure this is called after the other tools.
# coge