from urllib.parse import urlunparse, urlparse, quote
from jupyter_server.utils import ensure_async, url_path_join



def get_client_uri(self, protocol, host, port, proxied_path):
    # if self.absolute_url:
    if not self.absolute_url:
        client_path = proxied_path
    else:
        context_path = self._get_context_path(host, port)
        client_path = url_path_join(context_path, proxied_path)


    # ensure client_path always starts with '/'
    if