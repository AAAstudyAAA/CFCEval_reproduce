import typing as t

from .datastructures import MultiDict


def __init__(
        self,
        stream_factory: t.Optional["TStreamFactory"] = None,
        charset: str = "utf-8",
        errors: str = "replace",
        max_form_memory_size: t.Optional[int] = None,
        cls: t.Optional[t.Type[MultiDict]] = None,
        buffer_size: int = 64 * 1024,
) -> None:
    self.charset = charset
    self.errors = errors
    self.max_form_memory_size = max_form_memory_size

    if stream_factory is None:
        stream_factory = default_stream_factory

    self.stream_factory = stream_factory

    if cls is None:
        cls = MultiDict

    self.cls = cls

    self.buffer_size = buffer_size
