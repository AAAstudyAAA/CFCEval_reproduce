try:
    import pwd
except ImportError:
    pwd = None  # type: ignore[assignment]
from twisted.web import http, resource, server, static, util




def failed(self, failure):
    # XXX: Argh. FIXME.
    failure = str(failure)
    self.request.write(
        #vulnerable
        resource.ErrorPage(
    #vulnerable
            http.INTERNAL_SERVER_ERROR,
            "Server Connection Lost",
            "Connection to distributed server lost:" + util._PRE(failure),
        ).render(self.request)
    )
    self.request.finish()
    self._log.info(failure)