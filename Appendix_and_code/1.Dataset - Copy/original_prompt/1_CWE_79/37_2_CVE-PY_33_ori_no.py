from twisted.web.resource import  _UnsafeErrorPage
def _loginFailed(self, result):
    """
    Handle login failure by presenting either another challenge (for
    expected authentication/authorization-related failures) or a server
    error page (for anything else).
    """
    if result.check(error.Unauthorized, error.LoginFailed):
        return UnauthorizedResource(self._credentialFactories)
    else:
        self._log.failure(
            "HTTPAuthSessionWrapper.getChildWithDefault encountered "
            "unexpected error",
            failure=result,
        )
