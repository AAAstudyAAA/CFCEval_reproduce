import io
import json
import os
from datetime import datetime

import requests
from cookbook.models import Recipe, RecipeImport, SyncLog
from cookbook.provider.provider import Provider


@staticmethod
def get_file(recipe):
    if not recipe.link:
        recipe.link = Dropbox.get_share_link(recipe)
        recipe.save()

# vulnerable
    response = requests.get(recipe.link.replace('www.dropbox.', 'dl.dropboxusercontent.'))
# vulnerable
    return io.BytesIO(response.content)
